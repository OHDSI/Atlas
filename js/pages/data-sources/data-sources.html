<div class="wrapperTitle">
	<span data-bind="if: !loadingReport()">
		<i class="fa fa-area-chart"></i>
	</span> Data Source Reports
</div>

<div data-bind="ifnot: canViewCdmResults">
	<div class="padded">
		<access-denied params="isAuthenticated: $component.isAuthenticated"></access-denied>
	</div>
</div>

<div data-bind="if: canViewCdmResults">
	<!-- ko if: showSelectionArea -->
	<div class="reportControls pad-5">
		<div class="row">
			<div class="col-xs-12">
				<select class="form-control" data-bind="css : { invalid:  currentSource()==undefined }, options: sources, optionsText:'sourceName', value: currentSource, optionsCaption:'Select a Source'"></select>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-12">
				<select class="form-control" data-bind="css : { invalid:  currentReport()==undefined }, options: reports, optionsCaption:'Select a Report', optionsText:'name', value: currentReport"></select>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	<!-- /ko -->

	<loading params="status: 'loading report'" data-bind="visible: loadingReport() && ! hasError()">
	</loading>

	<div class="paddedWrapper text-center error" data-bind="visible: hasError()">
		<div>
			<i class="fa fa-exclamation-circle"></i>
		</div>
		<div>error loading report</div>
	</div>

	<div id="report" class="flexed" data-bind="if:  currentReport() && ! hasError()">
		<div class="row pad-10 report">
			<!-- ko if: $component.currentReport().name == 'Dashboard'-->
				<dashboard params="context: $component"></dashboard>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Data Density' -->
				<datadensity params="context: $component"></datadensity>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Person' -->			
				<person params="context: $component"></person>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Visit' -->
				<visit params="context: $component, report: currentReport()"></visit>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Condition' -->
				<condition params="context: $component, report: currentReport()"></condition>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Condition Era' -->
				<condition-era params="context: $component, report: currentReport()"></condition-era>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Procedure' -->
				<procedure params="context: $component, report: currentReport()"></procedure>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Drug' -->
				<drug params="context: $component, report: currentReport()"></drug>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Drug Era' -->
				<drug-era params="context: $component, report: currentReport()"></drug-era>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Measurement' -->
				<measurement params="context: $component, report: currentReport()"></measurement>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name === 'Observation' -->
				<observation params="context: $component, report: currentReport()"></observation>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Death' -->
				<death params="context: $component"></death>
			<!-- /ko -->
			<!-- ko if: $component.currentReport().name == 'Achilles Heel' -->
				<achilles-heel params="context: $component"></achilles-heel>
			<!-- /ko -->
		</div>
	</div>
</div>
